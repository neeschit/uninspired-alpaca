const test = require("ava");
const { getSimpleAverage, getExponentialAverage } = require("./average.js");

test("sma", t => {
    const sma = getSimpleAverage(fixtures);

    t.deepEqual(sma, [
        208.98,
        205.865,
        204.49,
        204.97750000000002,
        206.05,
        206.76666666666665,
        207.60714285714286,
        208.2125,
        207.5922222222222,
        207.493,
        207.1881818181818,
        207.04916666666665,
        207.20692307692303,
        207.31642857142853,
        207.20833333333331,
        207.33593749999997,
        207.68499999999997,
        207.99527777777774,
        208.31921052631577,
        208.74175
    ]);
});

test("ema - small", t => {
    const ema = getExponentialAverage(smallExponentialFixtures);

    t.deepEqual(ema, [
        219.76166666666666,
        219.90144444444442,
        220.84925185185182,
        221.67735160493825,
        222.03903805761314,
        222.7004996499314,
        223.68576636327387,
        225.35699751483736,
        226.76139784619238,
        227.90254480003338,
        228.76753882669558,
        229.63720031646952,
        230.52290694094026,
        231.85718601548155,
        232.93889454675067,
        234.29904194051724
    ]);
});

const fixtures = [
    208.98,
    202.75,
    201.74,
    206.44,
    210.34,
    210.35,
    212.65,
    212.45,
    202.63,
    206.6,
    204.14,
    205.52,
    209.1,
    208.74,
    205.695,
    209.25,
    213.27,
    213.27,
    214.15,
    216.77
];

const smallExponentialFixtures = [
    218.96,
    220.81,
    227.01,
    227.06,
    224.39,
    227,
    230.09,
    236.22,
    235.89,
    235.32,
    234.39,
    235.29,
    236.28,
    240.53,
    239.97,
    243.14
];
